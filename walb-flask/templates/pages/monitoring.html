{% extends "base.html" %} {% set page_title = "ëª¨ë‹ˆí„°ë§" %} {% block title %}{{ page_title }}{% endblock %} {% block content %}
<!-- íˆì–´ë¡œ í—¤ë” -->
<div class="bg-gradient-to-r from-indigo-600 to-blue-600 rounded-2xl p-8 text-white mb-8 relative overflow-hidden">
    <div class="relative z-10">
        <div class="flex items-center mb-4">
            <span class="text-4xl mr-4 animate-pulse">ğŸ“Š</span>
            <div>
                <h1 class="text-3xl font-bold mb-2">Splunk & Kinesis ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h1>
                <p class="text-indigo-100">GuardDuty, CloudTrail, CloudWatch ë¡œë¶€í„° ìˆ˜ì§‘ë˜ëŠ” ë¡œê·¸ë¥¼ í†µí•´ AWS ë¦¬ì†ŒìŠ¤ì˜ ì‹¤ì‹œê°„ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>

    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
        <div class="absolute top-10 right-10 w-20 h-20 bg-white rounded-full animate-pulse"></div>
        <div class="absolute bottom-10 right-20 w-16 h-16 bg-white rounded-full animate-pulse delay-1000"></div>
        <div class="absolute top-20 left-20 w-12 h-12 bg-white rounded-full animate-pulse delay-2000"></div>
    </div>
</div>

<!-- ê³„ì • ì„ íƒ ì„¹ì…˜ -->
<div class="account-selection-section">
    <h2 class="section-title">
        <span class="section-icon">â˜ï¸</span>
        ëª¨ë‹ˆí„°ë§í•  AWS ê³„ì • ì„ íƒ
    </h2>

    {% if accounts %}
    <div class="accounts-grid">
        {% for account in accounts %}
        <div class="account-card {% if selected_account and selected_account.account_id == account.account_id %}selected{% endif %}" data-account-id="{{ account.account_id }}" onclick="selectAccount('{{ account.account_id }}')">
            <div class="account-header">
                <h3 class="account-name">{{ account.cloud_name }}</h3>
                <div class="account-type-badge">
                    {% if account.connection_type == 'role' %}
                    <span class="badge badge-role">Role</span>
                    {% else %}
                    <span class="badge badge-key">Key</span>
                    {% endif %}
                </div>
            </div>
            <div class="account-details">
                <div class="account-detail">
                    <span class="detail-label">ê³„ì • ID</span>
                    <span class="detail-value">{{ account.account_id }}</span>
                </div>
                <div class="account-detail">
                    <span class="detail-label">ë¦¬ì „</span>
                    <span class="detail-value">{{ account.primary_region }}</span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“‹</div>
        <h3>ë“±ë¡ëœ AWS ê³„ì •ì´ ì—†ìŠµë‹ˆë‹¤</h3>
        <p>ëª¨ë‹ˆí„°ë§ì„ ì‹œì‘í•˜ë ¤ë©´ ë¨¼ì € AWS ê³„ì •ì„ ì—°ê²°í•´ì£¼ì„¸ìš”.</p>
        <a href="{{ url_for('connection.index') }}" class="btn btn-primary"> <span>ğŸ’«</span> AWS ê³„ì • ì—°ê²°í•˜ê¸° </a>
    </div>
    {% endif %}
</div>

<!-- ëª¨ë‹ˆí„°ë§ ì½˜í…ì¸  -->
{% if selected_account %}
<div class="monitoring-content mt-8">
    <!-- ê¸°ì¡´ Kinesis ì„œë¹„ìŠ¤ ê´€ë¦¬ ì¹´ë“œ (ì£¼ì„ì²˜ë¦¬ - ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ìœ¼ë¡œ ëŒ€ì²´ë¨) -->
    <!--
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">
                <span class="mr-2">âš™ï¸</span>
                Kinesis ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤ (ê¸°ì¡´)
            </h2>
            <div class="service-status-badge" id="serviceStatusBadge">
                {% if service_status and service_status.running %}
                <span class="badge badge-success">ğŸŸ¢ ì‹¤í–‰ì¤‘</span>
                {% elif service_status and service_status.exists %}
                <span class="badge badge-warning">ğŸŸ¡ ì¤‘ì§€ë¨</span>
                {% else %}
                <span class="badge badge-error">ğŸ”´ ë¯¸ì„¤ì¹˜</span>
                {% endif %}
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="stat-card">
                <div class="stat-label">ê³„ì • ID</div>
                <div class="stat-value">{{ selected_account.account_id }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ì—°ê²° ë°©ì‹</div>
                <div class="stat-value">
                    {% if selected_account.connection_type == 'role' %}
                    <span class="badge badge-role">Role</span>
                    {% else %}
                    <span class="badge badge-key">Access Key</span>
                    {% endif %}
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ë¦¬ì „</div>
                <div class="stat-value">{{ selected_account.primary_region }}</div>
            </div>
        </div>
        
        <div class="service-controls">
            {% if not service_status or not service_status.exists %}
            <button onclick="createService()" class="btn btn-primary" id="createBtn">
                <span>ğŸš€</span> ì„œë¹„ìŠ¤ ìƒì„± (ê¸°ì¡´)
            </button>
            {% else %}
                {% if service_status.running %}
                <button onclick="stopService()" class="btn btn-warning" id="stopBtn">
                    <span>â¹ï¸</span> ì„œë¹„ìŠ¤ ì¤‘ì§€
                </button>
                {% else %}
                <button onclick="startService()" class="btn btn-success" id="startBtn">
                    <span>â–¶ï¸</span> ì„œë¹„ìŠ¤ ì‹œì‘
                </button>
                {% endif %}
                <button onclick="removeService()" class="btn btn-danger" id="removeBtn">
                    <span>ğŸ—‘ï¸</span> ì„œë¹„ìŠ¤ ì‚­ì œ
                </button>
                <button onclick="viewLogs()" class="btn btn-secondary" id="logsBtn">
                    <span>ğŸ“‹</span> ë¡œê·¸ ë³´ê¸°
                </button>
            {% endif %}
        </div>
    </div>
    -->

    <!-- Kinesis ì„œë¹„ìŠ¤ ìƒì„±/ê´€ë¦¬ ì¹´ë“œ -->
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6" id="kinesisServiceCard">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">
                <span class="mr-2">ğŸš€</span>
                <span id="serviceCardTitle">Kinesis ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤</span>
            </h2>
            <div class="service-status-indicator" id="serviceStatusIndicator" style="display: none">
                <span class="badge" id="serviceStatusBadgeNew">í™•ì¸ ì¤‘...</span>
            </div>
        </div>

        <!-- ê³„ì • ì •ë³´ í‘œì‹œ -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <h3 class="text-lg font-semibold text-blue-800 mb-3">ì„ íƒëœ ê³„ì • ì •ë³´</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="account-info-item">
                    <span class="info-label">ê³„ì • ì´ë¦„</span>
                    <span class="info-value">{{ selected_account.cloud_name }}</span>
                </div>
                <div class="account-info-item">
                    <span class="info-label">ê³„ì • ID</span>
                    <span class="info-value">{{ selected_account.account_id }}</span>
                </div>
                <div class="account-info-item">
                    <span class="info-label">ì—°ê²° ë°©ì‹</span>
                    <span class="info-value">
                        {% if selected_account.connection_type == 'role' %}
                        <span class="badge badge-role">Cross-Account Role</span>
                        {% else %}
                        <span class="badge badge-key">Access Key</span>
                        {% endif %}
                    </span>
                </div>
                <div class="account-info-item">
                    <span class="info-label">ë¦¬ì „</span>
                    <span class="info-value">{{ selected_account.primary_region }}</span>
                </div>
                {% if selected_account.connection_type == 'role' %}
                <div class="account-info-item">
                    <span class="info-label">Role ARN</span>
                    <span class="info-value text-xs">{{ selected_account.role_arn }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš° í‘œì‹œ -->
        <div id="serviceInstallSection" class="script-command-section">
            <h3 class="text-lg font-semibold mb-3">
                <span class="mr-2">ğŸ’»</span>
                ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´
            </h3>

            <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm overflow-x-auto mb-4">
                <!-- SSH ì ‘ì† ì •ë³´ëŠ” ë³´ì•ˆìƒ ìˆ¨ê²¨ë‘  (ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ ì •ë³´) -->
                <!--
                <div class="mb-2 text-gray-400"># SSH ì ‘ì†</div>
                <div class="mb-3">ssh -i SplunkEc2.pem ec2-user@3.35.197.218</div>
                -->

                <div class="mb-2 text-gray-400"># ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´</div>
                {% if selected_account.connection_type == 'role' %}
                <div class="text-yellow-400">./create_kinesis_service.sh role {{ selected_account.account_id }} {{ selected_account.role_arn }} {{ selected_account.primary_region }}</div>
                {% else %}
                <div class="text-yellow-400">./create_kinesis_service.sh accesskey {{ selected_account.account_id }} {{ selected_account.access_key_id }} *** {{ selected_account.primary_region }}</div>
                <div class="text-xs text-gray-500 mt-1"># secret_access_keyëŠ” ë³´ì•ˆì„ ìœ„í•´ ***ë¡œ í‘œì‹œ</div>
                {% endif %}
            </div>

            <!-- ì‹¤í–‰ ë²„íŠ¼ -->
            <div class="flex gap-3">
                <button onclick="executeKinesisScript()" class="btn btn-primary" id="createServiceBtn"><span>ğŸš€</span> Kinesis ì„œë¹„ìŠ¤ ìƒì„± ì‹¤í–‰</button>
                <button onclick="copyScriptCommand()" class="btn btn-secondary"><span>ğŸ“‹</span> ëª…ë ¹ì–´ ë³µì‚¬</button>
            </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ê°€ ì´ë¯¸ ì„¤ì¹˜ëœ ê²½ìš° í‘œì‹œ -->
        <div id="serviceManageSection" class="service-management-section" style="display: none">
            <h3 class="text-lg font-semibold mb-3">
                <span class="mr-2">âš™ï¸</span>
                ì„œë¹„ìŠ¤ ê´€ë¦¬
            </h3>

            <!-- ì„œë¹„ìŠ¤ ìƒíƒœ ì •ë³´ -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4" id="serviceStatusInfo">
                <h4 class="font-semibold text-green-800 mb-3">ğŸ”§ ì„¤ì¹˜ëœ ì„œë¹„ìŠ¤ ì •ë³´</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 text-sm" id="serviceDetails">
                    <!-- ë™ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <!-- ë¡œê·¸ íŒŒì¼ ìˆ˜ì§‘ í˜„í™© -->
                <div class="mt-4 p-3 bg-white border border-green-300 rounded" id="logCollectionStatus">
                    <h5 class="font-medium text-green-800 mb-2">ğŸ“Š ë¡œê·¸ ìˆ˜ì§‘ í˜„í™©</h5>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 text-sm" id="logFilesSummary">
                        <!-- ë™ì ìœ¼ë¡œ ë¡œê·¸ íŒŒì¼ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

            <!-- ì„œë¹„ìŠ¤ ê´€ë¦¬ ë²„íŠ¼ë“¤ -->
            <div class="service-controls" id="serviceManageButtons">
                <button onclick="startKinesisService()" class="btn btn-success" id="startServiceBtn" style="display: none"><span>â–¶ï¸</span> ì„œë¹„ìŠ¤ ì‹œì‘</button>
                <button onclick="stopKinesisService()" class="btn btn-warning" id="stopServiceBtn" style="display: none"><span>â¹ï¸</span> ì„œë¹„ìŠ¤ ì¤‘ì§€</button>
                <button onclick="restartKinesisService()" class="btn btn-info" id="restartServiceBtn" style="display: none"><span>ğŸ”„</span> ì„œë¹„ìŠ¤ ì¬ì‹œì‘</button>
                <button onclick="viewServiceLogs()" class="btn btn-secondary" id="viewLogsBtn"><span>ğŸ“‹</span> ì„œë¹„ìŠ¤ ë¡œê·¸ ë³´ê¸°</button>
                <button onclick="checkKinesisServiceStatus()" class="btn btn-secondary" id="refreshStatusBtn"><span>ğŸ”„</span> ìƒíƒœ ìƒˆë¡œê³ ì¹¨</button>
            </div>

            <!-- ì¬ì„¤ì¹˜ ì˜µì…˜ -->
            <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded">
                <p class="text-sm text-yellow-800 mb-2">
                    <span class="mr-1">âš ï¸</span>
                    ì„œë¹„ìŠ¤ì— ë¬¸ì œê°€ ìˆê±°ë‚˜ ì¬ì„¤ì¹˜ê°€ í•„ìš”í•œ ê²½ìš°:
                </p>
                <button onclick="reinstallService()" class="btn btn-warning btn-sm"><span>ğŸ”§</span> ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜</button>
                <button onclick="showReinstallForm()" class="btn btn-secondary btn-sm"><span>ğŸ”„</span> ìŠ¤í¬ë¦½íŠ¸ ë‹¤ì‹œ ì‹¤í–‰</button>
            </div>
        </div>

        <!-- ì‹¤í–‰ ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div id="scriptExecutionResult" class="mt-6" style="display: none">
            <div class="bg-gray-50 border rounded-lg p-4">
                <h4 class="font-semibold mb-3 flex items-center">
                    <span class="mr-2">ğŸ“‹</span>
                    ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼
                </h4>
                <div id="scriptExecutionContent">
                    <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- ì¢…í•© ëª¨ë‹ˆí„°ë§ ìƒíƒœ ì¹´ë“œ -->
    {% if comprehensive_status %}
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gray-800">
                <span class="mr-2">ğŸ“ˆ</span>
                AWS ì„œë¹„ìŠ¤ ìƒíƒœ ëª¨ë‹ˆí„°ë§
            </h2>
            <div class="overall-health-badge">
                {% if comprehensive_status and comprehensive_status.overall_health == 'healthy' %}
                <span class="badge badge-success">ğŸŸ¢ ì •ìƒ</span>
                {% elif comprehensive_status and comprehensive_status.overall_health == 'degraded' %}
                <span class="badge badge-warning">ğŸŸ¡ ì£¼ì˜</span>
                {% else %}
                <span class="badge badge-error">ğŸ”´ ì˜¤ë¥˜</span>
                {% endif %}
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <!-- CloudWatch ìƒíƒœ -->
            <div class="service-status-card">
                <div class="service-header">
                    <span class="service-icon">ğŸ“Š</span>
                    <h3 class="service-name">CloudWatch</h3>
                    <div class="service-badge">
                        {% if comprehensive_status and comprehensive_status.services and comprehensive_status.services.cloudwatch and comprehensive_status.services.cloudwatch.active %}
                        <span class="badge badge-success">Active</span>
                        {% else %}
                        <span class="badge badge-error">Inactive</span>
                        {% endif %}
                    </div>
                </div>
                <div class="service-details">
                    <div class="stat-item">
                        <span class="stat-label">ë¡œê·¸ ê·¸ë£¹</span>
                        <span class="stat-value">{{ comprehensive_status.services.cloudwatch.log_groups|length if comprehensive_status and comprehensive_status.services and comprehensive_status.services.cloudwatch and comprehensive_status.services.cloudwatch.log_groups else 0 }}ê°œ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">íŒŒì¼ ìˆ˜ì§‘</span>
                        <span class="stat-value" id="cloudtrail-log-status"> <span class="loading-spinner">ğŸ”„</span> í™•ì¸ ì¤‘... </span>
                    </div>
                </div>

                <!-- ë¡œê·¸ íŒŒì¼ ìƒì„¸ ì •ë³´ (ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸) -->
                <div class="log-file-details mt-3" id="cloudtrail-details" style="display: none">
                    <div class="log-detail-item">
                        <span class="log-detail-label">íŒŒì¼ í¬ê¸°:</span>
                        <span class="log-detail-value" id="cloudtrail-size">-</span>
                    </div>
                    <div class="log-detail-item">
                        <span class="log-detail-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:</span>
                        <span class="log-detail-value" id="cloudtrail-updated">-</span>
                    </div>
                    <button onclick="showLogPreview('cloudtrail')" class="btn btn-mini btn-secondary mt-2"><span>ğŸ“‹</span> ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸°</button>
                </div>
            </div>

            <!-- CloudTrail ìƒíƒœ -->
            <div class="service-status-card">
                <div class="service-header">
                    <span class="service-icon">ğŸ”</span>
                    <h3 class="service-name">CloudTrail</h3>
                    <div class="service-badge">
                        {% if comprehensive_status and comprehensive_status.services and comprehensive_status.services.cloudtrail and comprehensive_status.services.cloudtrail.active %}
                        <span class="badge badge-success">Active</span>
                        {% else %}
                        <span class="badge badge-error">Inactive</span>
                        {% endif %}
                    </div>
                </div>
                <div class="service-details">
                    <div class="stat-item">
                        <span class="stat-label">Trail ìˆ˜</span>
                        <span class="stat-value">{{ comprehensive_status.services.cloudtrail.total_trails if comprehensive_status and comprehensive_status.services and comprehensive_status.services.cloudtrail and comprehensive_status.services.cloudtrail.total_trails else 0 }}ê°œ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">íŒŒì¼ ìˆ˜ì§‘</span>
                        <span class="stat-value" id="guardduty-log-status"> <span class="loading-spinner">ğŸ”„</span> í™•ì¸ ì¤‘... </span>
                    </div>
                </div>

                <!-- ë¡œê·¸ íŒŒì¼ ìƒì„¸ ì •ë³´ (ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸) -->
                <div class="log-file-details mt-3" id="guardduty-details" style="display: none">
                    <div class="log-detail-item">
                        <span class="log-detail-label">íŒŒì¼ í¬ê¸°:</span>
                        <span class="log-detail-value" id="guardduty-size">-</span>
                    </div>
                    <div class="log-detail-item">
                        <span class="log-detail-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:</span>
                        <span class="log-detail-value" id="guardduty-updated">-</span>
                    </div>
                    <button onclick="showLogPreview('guardduty')" class="btn btn-mini btn-secondary mt-2"><span>ğŸ“‹</span> ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸°</button>
                </div>
            </div>

            <!-- GuardDuty ìƒíƒœ -->
            <div class="service-status-card">
                <div class="service-header">
                    <span class="service-icon">ğŸ›¡ï¸</span>
                    <h3 class="service-name">GuardDuty</h3>
                    <div class="service-badge">
                        {% if comprehensive_status and comprehensive_status.services and comprehensive_status.services.guardduty and comprehensive_status.services.guardduty.active %}
                        <span class="badge badge-success">Active</span>
                        {% else %}
                        <span class="badge badge-error">Inactive</span>
                        {% endif %}
                    </div>
                </div>
                <div class="service-details">
                    <div class="stat-item">
                        <span class="stat-label">íƒì§€ê¸°</span>
                        <span class="stat-value">{{ comprehensive_status.services.guardduty.detectors|length if comprehensive_status and comprehensive_status.services and comprehensive_status.services.guardduty and comprehensive_status.services.guardduty.detectors else 0 }}ê°œ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">íŒŒì¼ ìˆ˜ì§‘</span>
                        <span class="stat-value" id="security-hub-log-status"> <span class="loading-spinner">ğŸ”„</span> í™•ì¸ ì¤‘... </span>
                    </div>
                </div>

                <!-- ë¡œê·¸ íŒŒì¼ ìƒì„¸ ì •ë³´ (ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸) -->
                <div class="log-file-details mt-3" id="security-hub-details" style="display: none">
                    <div class="log-detail-item">
                        <span class="log-detail-label">íŒŒì¼ í¬ê¸°:</span>
                        <span class="log-detail-value" id="security-hub-size">-</span>
                    </div>
                    <div class="log-detail-item">
                        <span class="log-detail-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:</span>
                        <span class="log-detail-value" id="security-hub-updated">-</span>
                    </div>
                    <button onclick="showLogPreview('security-hub')" class="btn btn-mini btn-secondary mt-2"><span>ğŸ“‹</span> ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸°</button>
                </div>
            </div>
        </div>

        <!-- ìƒì„¸ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ -->
        <div class="service-controls">
            <button onclick="checkServiceStatus()" class="btn btn-secondary"><span>ğŸ”„</span> ìƒíƒœ ìƒˆë¡œê³ ì¹¨</button>
            <button onclick="showServiceDetails()" class="btn btn-info"><span>ğŸ“‹</span> ìƒì„¸ ì •ë³´</button>
        </div>
    </div>
    {% endif %}

    <!-- Splunk ëª¨ë‹ˆí„°ë§ ì¹´ë“œ -->
    {% if service_status and service_status.running %}
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">
            <span class="mr-2">ğŸ“Š</span>
            Splunk ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
        </h2>

        {% if monitoring_status and monitoring_status.monitoring_active %}
        <div class="monitoring-stats mb-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="stat-card">
                    <div class="stat-label">ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œê·¸</div>
                    <div class="stat-value">{{ monitoring_status.available_logs|length }}ê°œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì´ ë¡œê·¸ í¬ê¸°</div>
                    <div class="stat-value">{{ '%.1f'|format(monitoring_status.total_log_size / 1024 / 1024) }} MB</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
                    <div class="stat-value">{% if monitoring_status.last_activity %} {{ monitoring_status.last_activity[:19] }} {% else %} ì—†ìŒ {% endif %}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ëª¨ë‹ˆí„°ë§ ìƒíƒœ</div>
                    <div class="stat-value">
                        <span class="badge badge-success">í™œì„±</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Splunk ëŒ€ì‹œë³´ë“œ ë§í¬ -->
        <div class="splunk-dashboards">
            <h3 class="text-lg font-semibold mb-3">ğŸ“ˆ ëŒ€ì‹œë³´ë“œ ë°”ë¡œê°€ê¸°</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="dashboard-link">
                    <span class="dashboard-icon">ğŸ”</span>
                    <span class="dashboard-name">CloudTrail</span>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="dashboard-link">
                    <span class="dashboard-icon">ğŸ›¡ï¸</span>
                    <span class="dashboard-name">GuardDuty</span>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="dashboard-link">
                    <span class="dashboard-icon">ğŸ”’</span>
                    <span class="dashboard-name">Security Hub</span>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="dashboard-link">
                    <span class="dashboard-icon">ğŸ“Š</span>
                    <span class="dashboard-name">ì „ì²´ ë¡œê·¸</span>
                </a>
            </div>
        </div>
        {% else %}
        <div class="text-center py-8">
            <div class="text-6xl mb-4">â³</div>
            <h3 class="text-lg font-semibold mb-2">ë¡œê·¸ ìˆ˜ì§‘ ëŒ€ê¸° ì¤‘</h3>
            <p class="text-gray-600">Kinesis ì„œë¹„ìŠ¤ê°€ ì‹¤í–‰ëœ í›„ ë¡œê·¸ê°€ ìˆ˜ì§‘ë˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
        </div>
        {% endif %}
    </div>
    {% endif %}

    <!-- í•˜ë‹¨ Splunk ë¦¬ë‹¤ì´ë ‰ì…˜ ë§í¬ (í•­ìƒ í‘œì‹œ) -->
    {% if selected_account %}
    <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-6 text-white mb-6">
        <div class="text-center">
            <h2 class="text-2xl font-bold mb-4">
                <span class="mr-2">ğŸ”</span>
                Splunk ë¡œê·¸ ë¶„ì„ í”Œë«í¼
            </h2>
            <p class="text-purple-100 mb-6">ìˆ˜ì§‘ëœ ë¡œê·¸ë¥¼ Splunkì—ì„œ ìƒì„¸ ë¶„ì„í•˜ê³  ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="splunk-redirect-link">
                    <div class="splunk-link-card">
                        <span class="splunk-link-icon">ğŸ”</span>
                        <h3 class="splunk-link-title">CloudTrail</h3>
                        <p class="splunk-link-desc">API í˜¸ì¶œ ë¡œê·¸</p>
                    </div>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="splunk-redirect-link">
                    <div class="splunk-link-card">
                        <span class="splunk-link-icon">ğŸ›¡ï¸</span>
                        <h3 class="splunk-link-title">GuardDuty</h3>
                        <p class="splunk-link-desc">ë³´ì•ˆ ìœ„í˜‘ íƒì§€</p>
                    </div>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="splunk-redirect-link">
                    <div class="splunk-link-card">
                        <span class="splunk-link-icon">ğŸŒ</span>
                        <h3 class="splunk-link-title">VPC Flow</h3>
                        <p class="splunk-link-desc">ë„¤íŠ¸ì›Œí¬ í”Œë¡œìš°</p>
                    </div>
                </a>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="splunk-redirect-link">
                    <div class="splunk-link-card">
                        <span class="splunk-link-icon">ğŸ“Š</span>
                        <h3 class="splunk-link-title">í†µí•© ë¶„ì„</h3>
                        <p class="splunk-link-desc">ëª¨ë“  ë¡œê·¸</p>
                    </div>
                </a>
            </div>

            <div class="text-center">
                <p class="text-sm text-purple-200 mb-4">ğŸ’¡ Splunk í”Œë«í¼ì—ì„œ ê³ ê¸‰ ê²€ìƒ‰, ëŒ€ì‹œë³´ë“œ, ì•Œë¦¼ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤</p>
                <a href="http://3.39.158.137:8000/ko-KR/app/search/main_dashboard?tab=layout_1" target="_blank" class="inline-flex items-center px-6 py-3 bg-white text-purple-600 font-semibold rounded-lg hover:bg-purple-50 transition-all duration-200">
                    <span class="mr-2">ğŸš€</span>
                    Splunk í”Œë«í¼ìœ¼ë¡œ ì´ë™
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
    <div id="alertMessage" class="alert-message" style="display: none"></div>
</div>
{% endif %}

<script>
    // ê³„ì • ì„ íƒ
    function selectAccount(accountId) {
        window.location.href = `/monitoring?account=${accountId}`;
    }

    // í˜„ì¬ ì„ íƒëœ ê³„ì • ID
    const ACCOUNT_ID = '{{ selected_account.account_id if selected_account else "" }}';

    // ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
    function showAlert(message, type = 'info') {
        const alertDiv = document.getElementById('alertMessage');
        alertDiv.className = `alert-message alert-${type}`;
        alertDiv.textContent = message;
        alertDiv.style.display = 'block';

        // 5ì´ˆ í›„ ìë™ ìˆ¨ê¹€
        setTimeout(() => {
            alertDiv.style.display = 'none';
        }, 5000);
    }

    // ë¡œë”© ìƒíƒœ í‘œì‹œ
    function setButtonLoading(buttonId, loading = true) {
        const button = document.getElementById(buttonId);
        if (!button) return;

        if (loading) {
            button.disabled = true;
            button.innerHTML = '<span>â³</span> ì²˜ë¦¬ì¤‘...';
        } else {
            button.disabled = false;
            // ì›ë˜ ë‚´ìš©ì€ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë³µì›ë¨
        }
    }

    // ì„œë¹„ìŠ¤ ìƒì„±
    async function createService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        setButtonLoading('createBtn');
        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/service/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert(result.message, 'success');
                // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            } else {
                showAlert(result.message, 'error');
                setButtonLoading('createBtn', false);
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
            setButtonLoading('createBtn', false);
        }
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘
    async function startService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        setButtonLoading('startBtn');
        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/service/start', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert(result.message, 'success');
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            } else {
                showAlert(result.message, 'error');
                setButtonLoading('startBtn', false);
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì‹œì‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
            setButtonLoading('startBtn', false);
        }
    }

    // ì„œë¹„ìŠ¤ ì¤‘ì§€
    async function stopService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        if (!confirm('ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
        }

        setButtonLoading('stopBtn');
        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/service/stop', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert(result.message, 'success');
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            } else {
                showAlert(result.message, 'error');
                setButtonLoading('stopBtn', false);
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì¤‘ì§€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
            setButtonLoading('stopBtn', false);
        }
    }

    // ì„œë¹„ìŠ¤ ì‚­ì œ
    async function removeService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        if (!confirm('ì„œë¹„ìŠ¤ë¥¼ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
            return;
        }

        setButtonLoading('removeBtn');
        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì‚­ì œí•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/service/remove', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert(result.message, 'success');
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            } else {
                showAlert(result.message, 'error');
                setButtonLoading('removeBtn', false);
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
            setButtonLoading('removeBtn', false);
        }
    }

    // ì„œë¹„ìŠ¤ ë¡œê·¸ ë³´ê¸°
    async function viewLogs() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        try {
            const response = await fetch(`/monitoring/service/logs/${ACCOUNT_ID}?lines=100`);
            const result = await response.json();

            if (result.success) {
                // ìƒˆ ì°½ì—ì„œ ë¡œê·¸ í‘œì‹œ
                const logWindow = window.open('', '_blank', 'width=800,height=600');
                logWindow.document.write(`
                <html>
                <head>
                    <title>Kinesis Service Logs - ${ACCOUNT_ID}</title>
                    <style>
                        body { font-family: monospace; margin: 20px; background: #1a1a1a; color: #00ff00; }
                        pre { white-space: pre-wrap; word-wrap: break-word; }
                        .header { color: #ffffff; margin-bottom: 20px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h2>Kinesis Service Logs</h2>
                        <p>Account: ${ACCOUNT_ID} | Lines: ${result.lines_count}</p>
                    </div>
                    <pre>${result.logs}</pre>
                </body>
                </html>
            `);
            } else {
                showAlert('ë¡œê·¸ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + result.error, 'error');
            }
        } catch (error) {
            showAlert('ë¡œê·¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤
    // Kinesis ì„œë¹„ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
    async function executeKinesisScript() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        showAlert('Kinesis ì„œë¹„ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/kinesis/execute-script', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert(result.message, 'success');

                // ì‹¤í–‰ ê²°ê³¼ í‘œì‹œ
                const resultDiv = document.getElementById('scriptExecutionResult');
                const contentDiv = document.getElementById('scriptExecutionContent');

                contentDiv.innerHTML = `
                <div class="execution-result">
                    <div class="result-header mb-4">
                        <div class="flex items-center justify-between">
                            <h5 class="font-semibold text-green-600">
                                <span class="mr-2">${result.actual_output ? 'ğŸš€' : 'ğŸ‰'}</span>
                                ${result.actual_output ? 'ì‹¤ì œ SSH ì‹¤í–‰ ì„±ê³µ!' : 'ì‹¤í–‰ ì„±ê³µ (ì‹¤ì œ ê²°ê³¼ ê¸°ë°˜)'}
                            </h5>
                            <span class="text-sm text-gray-500">${new Date().toLocaleString()}</span>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">ì‹¤í–‰ëœ ëª…ë ¹ì–´: <code class="bg-gray-200 px-2 py-1 rounded">sudo ${result.script_command}</code></p>
                    </div>
                    
                    <div class="result-output">
                        <h6 class="font-medium mb-2">${result.actual_output ? 'ì‹¤ì œ ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥:' : 'ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼:'}</h6>
                        <pre class="bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto">${result.actual_output || result.simulated_output}</pre>
                    </div>
                    
                    ${
                        result.service_details
                            ? `
                    <div class="service-details mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                        <h6 class="font-medium text-green-800 mb-3">ğŸ”§ ìƒì„±ëœ ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´</h6>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                            <div class="service-detail-item">
                                <span class="detail-label">ì„œë¹„ìŠ¤ëª…:</span>
                                <span class="detail-value font-mono">${result.service_details.service_name}</span>
                            </div>
                            <div class="service-detail-item">
                                <span class="detail-label">ì„œë¹„ìŠ¤ íŒŒì¼:</span>
                                <span class="detail-value font-mono text-xs">${result.service_details.service_file}</span>
                            </div>
                            <div class="service-detail-item">
                                <span class="detail-label">Python ìŠ¤í¬ë¦½íŠ¸:</span>
                                <span class="detail-value font-mono">${result.service_details.python_script}</span>
                            </div>
                            <div class="service-detail-item">
                                <span class="detail-label">í˜„ì¬ ìƒíƒœ:</span>
                                <span class="detail-value text-green-600 font-semibold">${result.service_details.status}</span>
                            </div>
                            <div class="service-detail-item">
                                <span class="detail-label">ì—°ê²°ëœ ìŠ¤íŠ¸ë¦¼:</span>
                                <span class="detail-value">${result.service_details.streams_connected.join(', ')}</span>
                            </div>
                            <div class="service-detail-item">
                                <span class="detail-label">ë¡œê·¸ ëª©ì ì§€:</span>
                                <span class="detail-value font-mono text-xs">${result.service_details.log_destination}</span>
                            </div>
                        </div>
                    </div>
                    `
                            : ''
                    }
                    
                    <div class="ssh-info mt-4 p-3 bg-blue-50 rounded">
                        <h6 class="font-medium mb-2">SSH ì‹¤í–‰ ì •ë³´:</h6>
                        <ul class="text-sm space-y-1">
                            <li><strong>Host:</strong> ${result.ssh_info.host}</li>
                            <li><strong>User:</strong> ${result.ssh_info.user}</li>
                            <li><strong>Key:</strong> ${result.ssh_info.key}</li>
                            <li><strong>ì‹¤í–‰ ëª…ë ¹:</strong> <code class="text-xs">${result.ssh_info.executed_command}</code></li>
                        </ul>
                    </div>
                    
                    <div class="mt-4 p-3 ${result.actual_output ? 'bg-blue-50 border-l-4 border-blue-400' : 'bg-green-50 border-l-4 border-green-400'}">
                        <p class="text-sm ${result.actual_output ? 'text-blue-800' : 'text-green-800'}">
                            ${
                                result.actual_output
                                    ? '<strong>ğŸš€ ì‹¤ì œ ì‹¤í–‰:</strong> SSHë¥¼ í†µí•´ ì›ê²© ì„œë²„ì—ì„œ ì‹¤ì œë¡œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤! Kinesis ì„œë¹„ìŠ¤ê°€ ìƒì„±ë˜ê³  ì‘ë™ ì¤‘ì…ë‹ˆë‹¤.'
                                    : '<strong>âœ… ì‹œë®¬ë ˆì´ì…˜:</strong> ì´ ê²°ê³¼ëŠ” ì‹¤ì œ SSH ì‹¤í–‰ í…ŒìŠ¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. Kinesis ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ê³  CloudTrail ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤!'
                            }
                        </p>
                    </div>
                </div>
            `;

                resultDiv.style.display = 'block';

                // ê²°ê³¼ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                showAlert(`ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹¤íŒ¨: ${result.message}`, 'error');
            }
        } catch (error) {
            showAlert('ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´ ë³µì‚¬
    async function copyScriptCommand() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        try {
            const response = await fetch(`/monitoring/kinesis/get-script-command/${ACCOUNT_ID}`);
            const result = await response.json();

            if (result.success) {
                // í´ë¦½ë³´ë“œì— ë³µì‚¬
                await navigator.clipboard.writeText(result.full_command);
                showAlert('ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } else {
                showAlert('ëª…ë ¹ì–´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
            }
        } catch (error) {
            showAlert('ëª…ë ¹ì–´ ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // ë¦¬ëˆ…ìŠ¤ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
    document.getElementById('linuxServiceStatusForm')?.addEventListener('submit', async function (e) {
        e.preventDefault();
        const formData = new FormData(this);

        showAlert('ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/ssh/service-status', {
                method: 'POST',
                body: formData,
            });

            const result = await response.json();

            if (result.success) {
                // ê²°ê³¼ í‘œì‹œ
                const resultDiv = document.getElementById('serviceStatusResult');
                const contentDiv = document.getElementById('serviceStatusContent');

                contentDiv.innerHTML = `
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                    <div class="stat-item">
                        <span class="stat-label">ì„œë¹„ìŠ¤ëª…</span>
                        <span class="stat-value">${result.service_name}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ìƒíƒœ</span>
                        <span class="stat-value ${result.status === 'running' ? 'text-green-600' : 'text-red-600'}">
                            ${result.status === 'running' ? 'ğŸŸ¢ ì‹¤í–‰ì¤‘' : 'ğŸ”´ ì¤‘ì§€ë¨'}
                        </span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">í™œì„± ìƒíƒœ</span>
                        <span class="stat-value ${result.is_active ? 'text-green-600' : 'text-gray-600'}">
                            ${result.is_active ? 'Active' : 'Inactive'}
                        </span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ë¶€íŒ…ì‹œ ì‹¤í–‰</span>
                        <span class="stat-value ${result.is_enabled ? 'text-green-600' : 'text-gray-600'}">
                            ${result.is_enabled ? 'Enabled' : 'Disabled'}
                        </span>
                    </div>
                </div>
                <details class="mt-4">
                    <summary class="cursor-pointer font-medium text-gray-700 hover:text-gray-900">
                        ìƒì„¸ ë¡œê·¸ ë³´ê¸°
                    </summary>
                    <pre class="mt-2 p-3 bg-gray-800 text-green-400 rounded text-sm overflow-x-auto">${result.raw_output}</pre>
                </details>
            `;

                resultDiv.style.display = 'block';
                showAlert('ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì™„ë£Œ', 'success');
            } else {
                showAlert(`ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ${result.message}`, 'error');
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    });

    // ì¢…í•© ëª¨ë‹ˆí„°ë§ ìƒíƒœ ìƒˆë¡œê³ ì¹¨
    async function checkServiceStatus() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        showAlert('AWS ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch(`/monitoring/aws/comprehensive-status/${ACCOUNT_ID}`);
            const result = await response.json();

            if (result.error) {
                showAlert(`ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ${result.error}`, 'error');
            } else {
                showAlert('AWS ì„œë¹„ìŠ¤ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    window.location.reload();
                }, 1500);
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´ í‘œì‹œ
    function showServiceDetails() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        // ìƒˆ ì°½ì—ì„œ ì‚¬ìš©ì ì¹œí™”ì ì¸ HTML í˜•íƒœë¡œ ìƒì„¸ ì •ë³´ í‘œì‹œ
        const detailWindow = window.open(`/monitoring/aws/service-details/${ACCOUNT_ID}`, '_blank', 'width=1200,height=800');
    }

    // ë¡œê·¸ íŒŒì¼ ìƒíƒœ í™•ì¸ ë° ì—…ë°ì´íŠ¸
    async function updateLogFileStatus() {
        if (!ACCOUNT_ID) return;

        try {
            const response = await fetch(`/monitoring/log-files/status/${ACCOUNT_ID}`);
            const result = await response.json();

            if (result.success) {
                // ê° ë¡œê·¸ íŒŒì¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                updateLogFileUI('cloudtrail', result.log_files['cloudtrail.log']);
                updateLogFileUI('guardduty', result.log_files['guardduty.log']);
                updateLogFileUI('security-hub', result.log_files['security-hub.log']);

                // ì „ì²´ ê±´ê°•ë„ ì—…ë°ì´íŠ¸
                updateOverallHealth(result.overall_health);
            } else {
                // ì˜¤ë¥˜ ì‹œ ëª¨ë“  ìƒíƒœë¥¼ í™•ì¸ ë¶ˆê°€ë¡œ í‘œì‹œ
                ['cloudtrail', 'guardduty', 'security-hub'].forEach((logType) => {
                    updateLogFileUI(logType, { exists: false, error: true });
                });
            }
        } catch (error) {
            console.error('ë¡œê·¸ íŒŒì¼ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error);
        }
    }

    // ê°œë³„ ë¡œê·¸ íŒŒì¼ UI ì—…ë°ì´íŠ¸
    function updateLogFileUI(logType, fileData) {
        const statusElement = document.getElementById(`${logType}-log-status`);
        const detailsElement = document.getElementById(`${logType}-details`);
        const sizeElement = document.getElementById(`${logType}-size`);
        const updatedElement = document.getElementById(`${logType}-updated`);

        if (!statusElement) return;

        if (fileData && fileData.exists) {
            // íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°
            if (fileData.is_recent) {
                statusElement.innerHTML = '<span class="badge badge-success">ğŸŸ¢ ì‹¤ì‹œê°„</span>';
            } else {
                statusElement.innerHTML = '<span class="badge badge-warning">ğŸŸ¡ ì§€ì—°ë¨</span>';
            }

            // ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸
            if (sizeElement) sizeElement.textContent = `${fileData.size_mb} MB`;
            if (updatedElement) updatedElement.textContent = fileData.last_modified_ago;
            if (detailsElement) detailsElement.style.display = 'block';
        } else {
            // íŒŒì¼ì´ ì—†ê±°ë‚˜ ì˜¤ë¥˜ì¸ ê²½ìš°
            statusElement.innerHTML = '<span class="badge badge-error">ğŸ”´ ì¤‘ë‹¨</span>';
            if (detailsElement) detailsElement.style.display = 'none';
        }
    }

    // ì „ì²´ ê±´ê°•ë„ ì—…ë°ì´íŠ¸
    function updateOverallHealth(healthScore) {
        const healthBadge = document.querySelector('.overall-health-badge .badge');
        if (!healthBadge) return;

        if (healthScore >= 80) {
            healthBadge.className = 'badge badge-success';
            healthBadge.innerHTML = 'ğŸŸ¢ ì •ìƒ';
        } else if (healthScore >= 50) {
            healthBadge.className = 'badge badge-warning';
            healthBadge.innerHTML = 'ğŸŸ¡ ì£¼ì˜';
        } else {
            healthBadge.className = 'badge badge-error';
            healthBadge.innerHTML = 'ğŸ”´ ì˜¤ë¥˜';
        }
    }

    // ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ í‘œì‹œ
    async function showLogPreview(logType) {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        try {
            const response = await fetch(`/monitoring/log-files/preview/${ACCOUNT_ID}/${logType}`);
            const result = await response.json();

            if (result.success && result.file_exists) {
                // ìƒˆ ì°½ì—ì„œ ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
                const logWindow = window.open('', '_blank', 'width=1000,height=700');
                logWindow.document.write(`
                <html>
                <head>
                    <title>${logType.toUpperCase()} Log Preview - ${ACCOUNT_ID}</title>
                    <style>
                        body { 
                            font-family: monospace; 
                            margin: 20px; 
                            background: #1a1a1a; 
                            color: #00ff00; 
                        }
                        pre { 
                            white-space: pre-wrap; 
                            word-wrap: break-word; 
                            font-size: 12px;
                            line-height: 1.4;
                        }
                        .header { 
                            color: #ffffff; 
                            margin-bottom: 20px; 
                            border-bottom: 1px solid #444;
                            padding-bottom: 10px;
                        }
                        .info { color: #ffff00; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h2>${logType.toUpperCase()} Log Preview</h2>
                        <div class="info">
                            <p>Account: ${ACCOUNT_ID} | File Size: ${(result.file_size / 1024 / 1024).toFixed(2)} MB | Total Lines: ${result.total_lines}</p>
                            <p>Last Modified: ${new Date(result.last_modified).toLocaleString()}</p>
                        </div>
                    </div>
                    <pre>${result.formatted_content}</pre>
                </body>
                </html>
            `);
            } else {
                showAlert(`${logType} ë¡œê·¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`, 'warning');
            }
        } catch (error) {
            showAlert('ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ íŒŒì¼ ìƒíƒœ í™•ì¸
    document.addEventListener('DOMContentLoaded', function () {
        if (ACCOUNT_ID) {
            // ì´ˆê¸° ë¡œë“œ
            updateLogFileStatus();
            checkKinesisServiceStatus(); // Kinesis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

            // 30ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
            setInterval(updateLogFileStatus, 30000);
            setInterval(checkKinesisServiceStatus, 60000); // 1ë¶„ë§ˆë‹¤ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
        }
    });

    // Kinesis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ë° UI ì—…ë°ì´íŠ¸
    async function checkKinesisServiceStatus() {
        if (!ACCOUNT_ID) {
            console.log('DEBUG: ACCOUNT_IDê°€ ì—†ìŠµë‹ˆë‹¤');
            return;
        }

        console.log('DEBUG: Kinesis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹œì‘, ACCOUNT_ID:', ACCOUNT_ID);

        try {
            const response = await fetch(`/monitoring/kinesis/service-status/${ACCOUNT_ID}`);
            const result = await response.json();

            console.log('DEBUG: Kinesis ìƒíƒœ ì‘ë‹µ:', result);

            if (result.success) {
                console.log('DEBUG: updateKinesisServiceUI í˜¸ì¶œ, installation_complete:', result.installation_complete);
                updateKinesisServiceUI(result);
            } else {
                console.error('Kinesis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:', result.error);
                // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì„¤ì¹˜ UI í‘œì‹œ
                showInstallSection();
            }
        } catch (error) {
            console.error('Kinesis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error);
            // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ì„¤ì¹˜ UI í‘œì‹œ
            showInstallSection();
        }
    }

    // Kinesis ì„œë¹„ìŠ¤ UI ì—…ë°ì´íŠ¸
    function updateKinesisServiceUI(serviceData) {
        console.log('DEBUG: updateKinesisServiceUI ì‹œì‘, serviceData:', serviceData);
        
        const statusIndicator = document.getElementById('serviceStatusIndicator');
        const statusBadge = document.getElementById('serviceStatusBadgeNew');
        const cardTitle = document.getElementById('serviceCardTitle');
        const installSection = document.getElementById('serviceInstallSection');
        const manageSection = document.getElementById('serviceManageSection');

        console.log('DEBUG: HTML ìš”ì†Œë“¤:', {
            statusIndicator: !!statusIndicator,
            statusBadge: !!statusBadge,
            cardTitle: !!cardTitle,
            installSection: !!installSection,
            manageSection: !!manageSection
        });

        // ìƒíƒœ í‘œì‹œê¸° ì—…ë°ì´íŠ¸
        if (statusIndicator) statusIndicator.style.display = 'block';

        if (serviceData.installation_complete) {
            console.log('DEBUG: ì„œë¹„ìŠ¤ ì„¤ì¹˜ ì™„ë£Œ - ê´€ë¦¬ ì„¹ì…˜ í‘œì‹œ');
            // ì„œë¹„ìŠ¤ê°€ ì„¤ì¹˜ëœ ê²½ìš°
            cardTitle.textContent = 'Kinesis ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤ ê´€ë¦¬';
            installSection.style.display = 'none';
            manageSection.style.display = 'block';

            // ìƒíƒœ ë°°ì§€ ì—…ë°ì´íŠ¸
            switch (serviceData.status_summary) {
                case 'running':
                    statusBadge.className = 'badge badge-success';
                    statusBadge.innerHTML = 'ğŸŸ¢ ì‹¤í–‰ì¤‘';
                    updateServiceManageButtons('running');
                    break;
                case 'installed_stopped':
                    statusBadge.className = 'badge badge-warning';
                    statusBadge.innerHTML = 'ğŸŸ¡ ì¤‘ì§€ë¨';
                    updateServiceManageButtons('stopped');
                    break;
                case 'installed_disabled':
                    statusBadge.className = 'badge badge-error';
                    statusBadge.innerHTML = 'ğŸ”´ ë¹„í™œì„±í™”';
                    updateServiceManageButtons('disabled');
                    break;
            }

            // ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸
            updateServiceDetails(serviceData);
            updateLogFilesSummary(serviceData.log_files);
        } else {
            // ì„œë¹„ìŠ¤ê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì€ ê²½ìš°
            cardTitle.textContent = 'Kinesis ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤ ìƒì„±';
            installSection.style.display = 'block';
            manageSection.style.display = 'none';

            statusBadge.className = 'badge badge-error';
            statusBadge.innerHTML = 'ğŸ”´ ë¯¸ì„¤ì¹˜';
        }
    }

    // ì„¤ì¹˜ ì„¹ì…˜ í‘œì‹œ
    function showInstallSection() {
        const cardTitle = document.getElementById('serviceCardTitle');
        const installSection = document.getElementById('serviceInstallSection');
        const manageSection = document.getElementById('serviceManageSection');
        const statusIndicator = document.getElementById('serviceStatusIndicator');

        cardTitle.textContent = 'Kinesis ë¡œê·¸ ìˆ˜ì§‘ ì„œë¹„ìŠ¤ ìƒì„±';
        installSection.style.display = 'block';
        manageSection.style.display = 'none';
        statusIndicator.style.display = 'none';
    }

    // ì„œë¹„ìŠ¤ ê´€ë¦¬ ë²„íŠ¼ ì—…ë°ì´íŠ¸
    function updateServiceManageButtons(status) {
        const startBtn = document.getElementById('startServiceBtn');
        const stopBtn = document.getElementById('stopServiceBtn');
        const restartBtn = document.getElementById('restartServiceBtn');

        // ëª¨ë“  ë²„íŠ¼ ìˆ¨ê¹€
        startBtn.style.display = 'none';
        stopBtn.style.display = 'none';
        restartBtn.style.display = 'none';

        // ìƒíƒœì— ë”°ë¼ ì ì ˆí•œ ë²„íŠ¼ í‘œì‹œ
        switch (status) {
            case 'running':
                stopBtn.style.display = 'inline-flex';
                restartBtn.style.display = 'inline-flex';
                break;
            case 'stopped':
            case 'disabled':
                startBtn.style.display = 'inline-flex';
                break;
        }
    }

    // ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸
    function updateServiceDetails(serviceData) {
        const serviceDetails = document.getElementById('serviceDetails');

        serviceDetails.innerHTML = `
        <div class="service-detail-item">
            <span class="detail-label">ì„œë¹„ìŠ¤ëª…:</span>
            <span class="detail-value font-mono">${serviceData.service_name}</span>
        </div>
        <div class="service-detail-item">
            <span class="detail-label">ì‹¤í–‰ ìƒíƒœ:</span>
            <span class="detail-value ${serviceData.service_running ? 'text-green-600' : 'text-red-600'}">
                ${serviceData.service_running ? 'âœ… ì‹¤í–‰ì¤‘' : 'âŒ ì¤‘ì§€ë¨'}
            </span>
        </div>
        <div class="service-detail-item">
            <span class="detail-label">ë¶€íŒ…ì‹œ ì‹¤í–‰:</span>
            <span class="detail-value ${serviceData.service_enabled ? 'text-green-600' : 'text-gray-600'}">
                ${serviceData.service_enabled ? 'âœ… í™œì„±í™”' : 'âŒ ë¹„í™œì„±í™”'}
            </span>
        </div>
        <div class="service-detail-item">
            <span class="detail-label">í”„ë¡œì„¸ìŠ¤:</span>
            <span class="detail-value ${serviceData.has_process ? 'text-green-600' : 'text-gray-600'}">
                ${serviceData.has_process ? 'âœ… ì‹¤í–‰ì¤‘' : 'âŒ ì¤‘ì§€ë¨'}
            </span>
        </div>
        <div class="service-detail-item">
            <span class="detail-label">Python ìŠ¤í¬ë¦½íŠ¸:</span>
            <span class="detail-value ${serviceData.python_script_exists ? 'text-green-600' : 'text-red-600'}">
                ${serviceData.python_script_exists ? 'âœ… ì¡´ì¬í•¨' : 'âŒ ì—†ìŒ'}
            </span>
        </div>
        <div class="service-detail-item">
            <span class="detail-label">ë¡œê·¸ ë””ë ‰í† ë¦¬:</span>
            <span class="detail-value ${serviceData.log_directory_exists ? 'text-green-600' : 'text-red-600'}">
                ${serviceData.log_directory_exists ? 'âœ… ì¡´ì¬í•¨' : 'âŒ ì—†ìŒ'}
            </span>
        </div>
    `;
    }

    // ë¡œê·¸ íŒŒì¼ ìš”ì•½ ì—…ë°ì´íŠ¸
    function updateLogFilesSummary(logFiles) {
        const logFilesSummary = document.getElementById('logFilesSummary');

        const logTypes = ['cloudtrail', 'guardduty', 'security-hub'];
        const logIcons = {
            cloudtrail: 'ğŸ”',
            guardduty: 'ğŸ›¡ï¸',
            'security-hub': 'ğŸ”’',
        };

        let summaryHTML = '';

        logTypes.forEach((logType) => {
            const logData = logFiles[logType] || { exists: false, size_mb: 0 };
            const icon = logIcons[logType];
            const name = logType.replace('-', ' ').toUpperCase();

            summaryHTML += `
            <div class="log-summary-item">
                <span class="log-icon">${icon}</span>
                <div class="log-info">
                    <div class="log-name">${name}</div>
                    <div class="log-status ${logData.exists ? 'text-green-600' : 'text-gray-500'}">
                        ${logData.exists ? `${logData.size_mb} MB` : 'íŒŒì¼ ì—†ìŒ'}
                    </div>
                </div>
            </div>
        `;
        });

        logFilesSummary.innerHTML = summaryHTML;
    }

    // ì„œë¹„ìŠ¤ ê´€ë¦¬ í•¨ìˆ˜ë“¤
    async function startKinesisService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/kinesis/manage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}&action=start`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert('âœ… Kinesis ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } else {
                showAlert(`ì„œë¹„ìŠ¤ ì‹œì‘ ì‹¤íŒ¨: ${result.message}`, 'error');
            }

            // 2ì´ˆ í›„ ìƒíƒœ ì¬í™•ì¸
            setTimeout(checkKinesisServiceStatus, 2000);
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì‹œì‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    async function stopKinesisService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        if (!confirm('ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
        }

        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/kinesis/manage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}&action=stop`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert('â¹ï¸ Kinesis ì„œë¹„ìŠ¤ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } else {
                showAlert(`ì„œë¹„ìŠ¤ ì¤‘ì§€ ì‹¤íŒ¨: ${result.message}`, 'error');
            }

            // 2ì´ˆ í›„ ìƒíƒœ ì¬í™•ì¸
            setTimeout(checkKinesisServiceStatus, 2000);
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì¤‘ì§€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    async function restartKinesisService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œì‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

        try {
            const response = await fetch('/monitoring/kinesis/manage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}&action=restart`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert('ğŸ”„ Kinesis ì„œë¹„ìŠ¤ê°€ ì¬ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } else {
                showAlert(`ì„œë¹„ìŠ¤ ì¬ì‹œì‘ ì‹¤íŒ¨: ${result.message}`, 'error');
            }

            // 3ì´ˆ í›„ ìƒíƒœ ì¬í™•ì¸
            setTimeout(checkKinesisServiceStatus, 3000);
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì¬ì‹œì‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    async function viewServiceLogs() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        // ê¸°ì¡´ ë¡œê·¸ ë³´ê¸° í•¨ìˆ˜ ì¬ì‚¬ìš©
        viewLogs();
    }

    async function reinstallService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        if (!confirm('ì„œë¹„ìŠ¤ë¥¼ ì¬ì„¤ì¹˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê¸°ì¡´ ì„¤ì •ì´ ì´ˆê¸°í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')) {
            return;
        }

        showAlert('ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');

        // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í•¨ìˆ˜ ì¬ì‚¬ìš©
        executeKinesisScript();
    }

    // ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ (ê¸°ì¡´ ì„œë¹„ìŠ¤ ì œê±° í›„ ìƒˆë¡œ ì„¤ì¹˜)
    async function reinstallService() {
        if (!ACCOUNT_ID) {
            showAlert('ê³„ì • IDê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
            return;
        }

        if (!confirm('ì„œë¹„ìŠ¤ë¥¼ ì™„ì „íˆ ì¬ì„¤ì¹˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâš ï¸ ê¸°ì¡´ ì„œë¹„ìŠ¤ê°€ ì œê±°ë˜ê³  ìƒˆë¡œ ì„¤ì¹˜ë©ë‹ˆë‹¤.\nğŸ“ ë¡œê·¸ ë°ì´í„°ëŠ” ë³´ì¡´ë©ë‹ˆë‹¤.')) {
            return;
        }

        showAlert('Kinesis ì„œë¹„ìŠ¤ë¥¼ ì¬ì„¤ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤... (ê¸°ì¡´ ì„œë¹„ìŠ¤ ì œê±° ì¤‘)', 'info');

        try {
            const response = await fetch('/monitoring/kinesis/reinstall', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `account_id=${ACCOUNT_ID}`,
            });

            const result = await response.json();

            if (result.success) {
                showAlert('âœ… ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ ì™„ë£Œ! ê¸°ì¡´ ì„œë¹„ìŠ¤ê°€ ì œê±°ë˜ê³  ìƒˆë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');

                // ì‹¤í–‰ ê²°ê³¼ í‘œì‹œ (ì¬ì„¤ì¹˜ ë©”ì‹œì§€ í¬í•¨)
                const resultDiv = document.getElementById('scriptExecutionResult');
                const contentDiv = document.getElementById('scriptExecutionContent');

                if (resultDiv && contentDiv) {
                    contentDiv.innerHTML = `
                        <div class="execution-result">
                            <div class="result-header mb-4">
                                <div class="flex items-center justify-between">
                                    <h5 class="font-semibold text-green-600">
                                        <span class="mr-2">ğŸ”„</span>
                                        ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ ì™„ë£Œ!
                                    </h5>
                                    <span class="text-sm text-gray-500">${new Date().toLocaleString()}</span>
                                </div>
                                <p class="text-sm text-gray-600 mt-1">ê¸°ì¡´ ì„œë¹„ìŠ¤ ì œê±° í›„ ìƒˆë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                            </div>
                            
                            <div class="result-output">
                                <h6 class="font-medium mb-2">ì¬ì„¤ì¹˜ ì‹¤í–‰ ê²°ê³¼:</h6>
                                <pre class="bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto">${result.actual_output || result.simulated_output}</pre>
                            </div>
                            
                            <div class="mt-4 p-3 bg-blue-50 border-l-4 border-blue-400">
                                <p class="text-sm text-blue-800">
                                    <strong>ğŸ”„ ì¬ì„¤ì¹˜ ì™„ë£Œ:</strong> ê¸°ì¡´ ì„œë¹„ìŠ¤ íŒŒì¼ê³¼ Python ìŠ¤í¬ë¦½íŠ¸ê°€ ì œê±°ë˜ê³  ìƒˆë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ ë°ì´í„°ëŠ” ë³´ì¡´ë˜ì—ˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                    `;

                    resultDiv.style.display = 'block';
                    resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }

                // 2ì´ˆ í›„ ì„œë¹„ìŠ¤ ìƒíƒœ ì¬í™•ì¸
                setTimeout(checkKinesisServiceStatus, 2000);
            } else {
                showAlert(`ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ ì‹¤íŒ¨: ${result.message}`, 'error');
            }
        } catch (error) {
            showAlert('ì„œë¹„ìŠ¤ ì¬ì„¤ì¹˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤', 'error');
        }
    }

    // ìŠ¤í¬ë¦½íŠ¸ ë‹¤ì‹œ ì‹¤í–‰ (í˜„ì¬ ìƒíƒœì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë§Œ ì¬ì‹¤í–‰)
    function showReinstallForm() {
        // ì„¤ì¹˜ ì„¹ì…˜ì„ ë‹¤ì‹œ í‘œì‹œ
        showInstallSection();
        showAlert('ğŸ’¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ì„œë¹„ìŠ¤ ìœ„ì— ë®ì–´ì“°ê¸°ë©ë‹ˆë‹¤.', 'info');
    }
</script>

{% endblock %} {% block extra_css %}
<style>
    /* ê³„ì • ì„ íƒ ì„¹ì…˜ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš© */
    .account-selection-section {
        margin-bottom: 2rem;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
    }

    .section-icon {
        font-size: 1.75rem;
        margin-right: 0.5rem;
    }

    .accounts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .account-card {
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .account-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        border-color: #cbd5e0;
    }

    .account-card.selected {
        border-color: #4299e1;
        background: #ebf8ff;
    }

    .account-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .account-name {
        font-size: 1.25rem;
        font-weight: 600;
        color: #2d3748;
    }

    .account-type-badge .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .badge-role {
        background: #e6fffa;
        color: #00a896;
    }

    .badge-key {
        background: #fef3c7;
        color: #d97706;
    }

    .account-details {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .account-detail {
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
    }

    .detail-label {
        color: #718096;
    }

    .detail-value {
        color: #2d3748;
        font-weight: 500;
    }

    .empty-state {
        text-align: center;
        padding: 4rem;
        background: white;
        border-radius: 12px;
        border: 2px dashed #e2e8f0;
    }

    .empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.2s ease;
        margin-top: 1rem;
    }

    .btn-primary {
        background: #4299e1;
        color: white;
    }

    .btn-primary:hover {
        background: #3182ce;
        transform: translateY(-1px);
    }

    .monitoring-content {
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* ìƒˆë¡œ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ */
    .stat-card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 1rem;
        text-align: center;
    }

    .stat-label {
        font-size: 0.875rem;
        color: #64748b;
        margin-bottom: 0.5rem;
    }

    .stat-value {
        font-size: 1.125rem;
        font-weight: 600;
        color: #1e293b;
    }

    .service-controls {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
    }

    .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .badge-success {
        background: #dcfce7;
        color: #166534;
    }

    .badge-warning {
        background: #fef3c7;
        color: #d97706;
    }

    .badge-error {
        background: #fee2e2;
        color: #dc2626;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .btn-primary {
        background: #3b82f6;
        color: white;
    }

    .btn-primary:hover:not(:disabled) {
        background: #2563eb;
        transform: translateY(-1px);
    }

    .btn-success {
        background: #10b981;
        color: white;
    }

    .btn-success:hover:not(:disabled) {
        background: #059669;
        transform: translateY(-1px);
    }

    .btn-warning {
        background: #f59e0b;
        color: white;
    }

    .btn-warning:hover:not(:disabled) {
        background: #d97706;
        transform: translateY(-1px);
    }

    .btn-danger {
        background: #ef4444;
        color: white;
    }

    .btn-danger:hover:not(:disabled) {
        background: #dc2626;
        transform: translateY(-1px);
    }

    .btn-secondary {
        background: #6b7280;
        color: white;
    }

    .btn-secondary:hover:not(:disabled) {
        background: #4b5563;
        transform: translateY(-1px);
    }

    .dashboard-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        text-decoration: none;
        color: #1e293b;
        transition: all 0.2s ease;
    }

    .dashboard-link:hover {
        background: #f1f5f9;
        border-color: #cbd5e0;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .dashboard-icon {
        font-size: 1.5rem;
    }

    .dashboard-name {
        font-weight: 600;
    }

    .alert-message {
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        font-weight: 500;
    }

    .alert-info {
        background: #dbeafe;
        color: #1e40af;
        border: 1px solid #93c5fd;
    }

    .alert-success {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #86efac;
    }

    .alert-error {
        background: #fee2e2;
        color: #dc2626;
        border: 1px solid #fca5a5;
    }

    .monitoring-stats {
        background: #f8fafc;
        border-radius: 12px;
        padding: 1.5rem;
    }

    /* ìƒˆë¡œ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ë“¤ */
    .service-config-card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 1.5rem;
    }

    .form-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 0.875rem;
        transition: border-color 0.2s;
    }

    .form-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .service-status-card {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.2s ease;
    }

    .service-status-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border-color: #d1d5db;
    }

    .service-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
    }

    .service-icon {
        font-size: 1.5rem;
        margin-right: 0.5rem;
    }

    .service-name {
        flex: 1;
        font-size: 1.125rem;
        font-weight: 600;
        color: #1f2937;
    }

    .service-badge {
        flex-shrink: 0;
    }

    .service-details {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.875rem;
    }

    .stat-label {
        color: #6b7280;
    }

    .stat-value {
        font-weight: 600;
        color: #1f2937;
    }

    /* Splunk ë¦¬ë‹¤ì´ë ‰ì…˜ ë§í¬ ìŠ¤íƒ€ì¼ */
    .splunk-redirect-link {
        text-decoration: none;
        transition: transform 0.2s ease;
    }

    .splunk-redirect-link:hover {
        transform: translateY(-2px);
    }

    .splunk-link-card {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
        backdrop-filter: blur(10px);
        transition: all 0.2s ease;
    }

    .splunk-link-card:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
    }

    .splunk-link-icon {
        font-size: 2rem;
        display: block;
        margin-bottom: 0.75rem;
    }

    .splunk-link-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: white;
        margin-bottom: 0.5rem;
    }

    .splunk-link-desc {
        font-size: 0.875rem;
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
    }

    .btn-info {
        background: #06b6d4;
        color: white;
    }

    .btn-info:hover:not(:disabled) {
        background: #0891b2;
        transform: translateY(-1px);
    }

    /* ìƒíƒœ ê²°ê³¼ ìŠ¤íƒ€ì¼ ê°œì„  */
    #serviceStatusResult .stat-item {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 1rem;
        text-align: center;
    }

    #serviceStatusResult .stat-label {
        display: block;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: #6b7280;
        margin-bottom: 0.5rem;
    }

    #serviceStatusResult .stat-value {
        display: block;
        font-size: 1.125rem;
        font-weight: 600;
        color: #1f2937;
    }

    /* Kinesis ì„œë¹„ìŠ¤ ìƒì„± ê´€ë ¨ ìŠ¤íƒ€ì¼ */
    .account-info-item {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .info-label {
        font-size: 0.75rem;
        font-weight: 500;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .info-value {
        font-size: 0.875rem;
        font-weight: 600;
        color: #1f2937;
    }

    .script-command-section {
        border-top: 1px solid #e5e7eb;
        padding-top: 1.5rem;
    }

    .execution-result {
        animation: fadeIn 0.5s ease-in;
    }

    .result-header {
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 1rem;
    }

    .result-output pre {
        max-height: 400px;
        overflow-y: auto;
    }

    /* ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´ ìŠ¤íƒ€ì¼ */
    .service-details {
        background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    }

    .service-detail-item {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        padding: 0.75rem;
        background: white;
        border-radius: 6px;
        border: 1px solid #d1fae5;
    }

    .detail-label {
        font-size: 0.75rem;
        font-weight: 500;
        color: #065f46;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .detail-value {
        font-size: 0.875rem;
        font-weight: 600;
        color: #1f2937;
        word-break: break-all;
    }

    /* ì„±ê³µ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ ê°œì„  */
    .border-l-4.border-green-400 {
        background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    }

    /* ì„œë¹„ìŠ¤ ìƒíƒœ í‘œì‹œê¸° */
    .service-status-indicator {
        display: flex;
        align-items: center;
    }

    /* ì„œë¹„ìŠ¤ ê´€ë¦¬ ì„¹ì…˜ */
    .service-management-section {
        animation: fadeIn 0.5s ease-in;
    }

    .service-status-info {
        background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    }

    /* ë¡œê·¸ ìš”ì•½ ì•„ì´í…œ */
    .log-summary-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem;
        background: white;
        border-radius: 6px;
        border: 1px solid #d1fae5;
    }

    .log-icon {
        font-size: 1.25rem;
        flex-shrink: 0;
    }

    .log-info {
        flex: 1;
    }

    .log-name {
        font-size: 0.75rem;
        font-weight: 600;
        color: #065f46;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.125rem;
    }

    .log-status {
        font-size: 0.875rem;
        font-weight: 500;
    }

    /* ì‘ì€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .btn-sm {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
    }

    .btn-mini {
        padding: 0.375rem 0.75rem;
        font-size: 0.75rem;
    }

    /* ì„œë¹„ìŠ¤ ê´€ë¦¬ ë²„íŠ¼ ê·¸ë£¹ */
    .service-controls {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        align-items: center;
    }

    /* ìƒíƒœ ìš”ì•½ ì¹´ë“œ */
    .status-summary-card {
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 1rem;
        transition: all 0.2s ease;
    }

    .status-summary-card:hover {
        background: #f1f5f9;
        border-color: #cbd5e0;
    }

    /* ì„¤ì¹˜ ì™„ë£Œ í‘œì‹œ */
    .installation-complete-badge {
        background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
        border: 1px solid #86efac;
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .installation-complete-badge h4 {
        color: #166534;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .installation-complete-badge p {
        color: #15803d;
        font-size: 0.875rem;
        margin: 0;
    }

    /* ìœ„í—˜ ê²½ê³  ìŠ¤íƒ€ì¼ */
    .warning-section {
        background: #fefce8;
        border: 1px solid #fde047;
        border-left: 4px solid #eab308;
        border-radius: 8px;
        padding: 1rem;
    }

    .warning-section h5 {
        color: #a16207;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .warning-section p {
        color: #a16207;
        font-size: 0.875rem;
        margin-bottom: 0.75rem;
    }

    /* ìµœê·¼ ë¡œê·¸ í‘œì‹œ */
    .recent-logs-section {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 1rem;
        margin-top: 1rem;
    }

    .recent-logs-section h5 {
        color: #374151;
        font-weight: 600;
        margin-bottom: 0.75rem;
    }

    .recent-logs-content {
        background: #1f2937;
        color: #10b981;
        padding: 0.75rem;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        font-size: 0.75rem;
        line-height: 1.4;
        white-space: pre-wrap;
        max-height: 200px;
        overflow-y: auto;
    }

    /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ê°œì„  */
    .loading-spinner {
        display: inline-block;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }

    /* ìƒíƒœ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
    .status-transition {
        transition: all 0.3s ease-in-out;
    }

    /* ì„œë¹„ìŠ¤ ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ */
    #kinesisServiceCard:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
    }

    /* ë°˜ì‘í˜• ê°œì„  */
    @media (max-width: 768px) {
        .account-info-item {
            text-align: center;
        }

        .script-command-section .bg-gray-900 {
            font-size: 0.75rem;
            padding: 0.75rem;
        }

        .flex.gap-3 {
            flex-direction: column;
            gap: 0.75rem;
        }

        .btn {
            width: 100%;
            justify-content: center;
        }

        .service-detail-item {
            padding: 0.5rem;
        }

        .detail-value {
            font-size: 0.75rem;
        }

        .service-controls {
            flex-direction: column;
            align-items: stretch;
        }

        .service-controls .btn {
            width: 100%;
        }

        .log-summary-item {
            padding: 0.5rem;
            gap: 0.5rem;
        }

        .log-icon {
            font-size: 1rem;
        }
    }
</style>
{% endblock %}
